let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("Pokemon is incorrect")}function n(){return e}function a(){let e=document.createElement("div");e.classList.add("loading"),e.textContent="loading...",document.body.appendChild(e)}function i(){let e=document.querySelector(".loading");e.remove()}function l(e){return a(),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){i(),e.imageUrl=t.sprites.other["official-artwork"].front_default,e.height=t.height,e.types=t.types.map(e=>e.type.name).join(", "),e.weight=t.weight,e.abilities=t.abilities.map(e=>e.ability.name).join(", "),e.id=t.id}).catch(function(e){i(),console.error(e)})}let o=document.querySelector("#search-bar");o.addEventListener("input",function(){let e=document.querySelectorAll(".card"),t=o.value.toUpperCase(),n=!0;e.forEach(function(e){e.innerText.toUpperCase().indexOf(t)>-1?(e.style.display="",n=!1):(e.style.display="none",$(".error").hide()),n?$(".error").show():$(".error").hide()})}),$(document).bind("keypress",function(e){if(13==e.keyCode){e.preventDefault();$(".navbar-collapse").collapse("hide"),$("#search-bar").blur()}}),$(document).click(function(e){if($(e.target).parents(".navbar-collapse").length<1){let t=$(e.target),n=$(".navbar-collapse");!0!==n.hasClass("show")||t.hasClass("navbar-toggle")||n.collapse("hide")}});var s=document.getElementById("inlineFormCustomSelect");function r(){var e=s.value,t=s.options[s.selectedIndex].text;console.log(e,t)}return s.onchange=r,r(),document.getElementById("inlineFormCustomSelect").addEventListener("change",function(){var e=s.value;let t=document.querySelectorAll(".card"),n=document.getElementById("inlineFormCustomSelect").value;for(var a=0;a<t.length;a++)t[a].innerText.toLowerCase().includes(n.toLowerCase())?t[a].classList.remove("is_hidden"):t[a].classList.add("is_hidden"),"all"===e&&t[a].classList.remove("is_hidden")}),{add:t,getAll:n,addListItem:function t(n){l(n).then(function(){let e=document.createElement("div");e.classList.add("tags");let t=`
                      <small id= poke-type class="type ${n.types.split(",")}">
                        ${n.types.split(",")}
                      </small>

                      `;e.innerHTML+=t;let a=document.createElement("h4");a.classList.add("card-title"),a.innerHTML=n.name,i.id="pokemon-"+n.id.toString();let l=document.createElement("img");l.classList.add("pokemon-img");let s=document.createElement("div");s.classList.add("card-img-top");let r=document.createElement("div");r.classList.add("card-body"),l.setAttribute("src",n.imageUrl),s.append(l),i.append(s),i.append(r),r.appendChild(a),r.appendChild(e),r.appendChild(o)});let a=document.querySelector("#pokemon-list"),i=document.createElement("li");i.classList.add("card");let o=document.createElement("button");o.classList.add("btn","button"),o.innerText="View",o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#pokemonModal"),a.appendChild(i),o.addEventListener("click",function(){(function t(n){l(n).then(function(){let a=$(".modal-body"),i=$(".modal-title"),l=$(".modal-footer");i.empty(),a.empty(),l.empty();let o=$("<h1>"+n.name+"</h1>"),s=$('<img class="modal-img" style="width:30%">');s.attr("src",n.imageUrl);let r=$("<p><b>Height</b> \xa0\xa0\xa0\xa0\xa0\xa0"+n.height+"</p>"),d=$("<p><b>Weight</b> \xa0\xa0\xa0\xa0\xa0"+n.weight+"</p>"),c=$("<p><b>Types</b> \xa0\xa0\xa0\xa0\xa0\xa0\xa0"+n.types+"</p>"),p=$("<p><b>Abilities</b> \xa0\xa0\xa0"+n.abilities+"</p>"),m=document.createElement("button");m.classList.add("btn"),m.innerText="Previous",m.addEventListener("click",()=>{var a;return a=n,void t(e[h(a)-1])}),0===h(n)&&m.classList.add("pokemon-nav1--disabled");let u=document.createElement("div");function h(t){return e.findIndex(e=>e.name===t.name)}u.classList.add("btn"),u.innerText="Next",u.addEventListener("click",()=>{var a;return a=n,void t(e[h(a)+1])}),150===h(n)&&u.classList.add("pokemon-nav2--disabled"),i.append(o),a.append(s),a.append(r),a.append(d),a.append(c),a.append(p),l.append(m),l.append(u)})})(n)})},loadList:function e(){return a(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){i(),e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:l}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});