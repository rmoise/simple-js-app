/* eslint-disable prettier/prettier */
let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("Pokemon is incorrect")}function n(){return e}function a(){let e=document.createElement("div");e.classList.add("loading"),e.textContent="loading...",document.body.appendChild(e)}function i(){let e=document.querySelector(".loading");e.remove()}function o(e){return a(),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){i(),e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types.map(e=>e.type.name).join(", "),e.weight=t.weight,e.abilities=t.abilities.map(e=>e.ability.name).join(", ")}).catch(function(e){i(),console.error(e)})}let l=document.querySelector("#search-bar");return l.addEventListener("input",function(){let e=document.querySelectorAll(".list-group-item"),t=l.value.toUpperCase(),n=!0;e.forEach(function(e){e.innerText.toUpperCase().indexOf(t)>-1?(e.style.display="",n=!1):(e.style.display="none",$(".error").hide()),n?$(".error").show():$(".error").hide()})}),$(document).bind("keypress",function(e){if(13==e.keyCode){e.preventDefault();$(".navbar-collapse").collapse("hide"),$("#search-bar").blur()}}),$(document).click(function(e){if($(e.target).parents(".navbar-collapse").length<1){let t=$(e.target),n=$(".navbar-collapse");!0!==n.hasClass("show")||t.hasClass("navbar-toggle")||n.collapse("hide")}}),{add:t,getAll:n,addListItem:function t(n){let a=document.querySelector(".pokemon-list"),i=document.createElement("li");i.classList.add("list-group-item");let l=document.createElement("button");l.classList.add("btn","button"),l.innerText=n.name,l.setAttribute("data-toggle","modal"),l.setAttribute("data-target","#pokemonModal"),i.appendChild(l),a.appendChild(i),l.addEventListener("click",function(){(function t(n){o(n).then(function(){let a=$(".modal-body"),i=$(".modal-title"),o=$(".modal-footer");i.empty(),a.empty(),o.empty();let l=$("<h1>"+n.name+"</h1>"),r=$('<img class="modal-img" style="width:30%">');r.attr("src",n.imageUrl);let s=$("<p><b>Height</b> \xa0\xa0\xa0\xa0\xa0\xa0"+n.height+"</p>"),d=$("<p><b>Weight</b> \xa0\xa0\xa0\xa0\xa0"+n.weight+"</p>"),p=$("<p><b>Types</b> \xa0\xa0\xa0\xa0\xa0\xa0\xa0"+n.types+"</p>"),c=$("<p><b>Abilities</b> \xa0\xa0\xa0"+n.abilities+"</p>"),u=document.createElement("button");u.classList.add("btn"),u.innerText="Previous",u.addEventListener("click",()=>{var a;return a=n,void t(e[h(a)-1])}),0===h(n)&&u.classList.add("pokemon-nav1--disabled");let m=document.createElement("div");function h(t){return e.findIndex(e=>e.name===t.name)}m.classList.add("btn"),m.innerText="Next",m.addEventListener("click",()=>{var a;return a=n,void t(e[h(a)+1])}),150===h(n)&&m.classList.add("pokemon-nav2--disabled"),i.append(l),a.append(r),a.append(s),a.append(d),a.append(p),a.append(c),o.append(u),o.append(m)})})(n)})},loadList:function e(){return a(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){i(),e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){i(),console.error(e)})},loadDetails:o}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});