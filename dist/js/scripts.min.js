/* eslint-disable prettier/prettier */
let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("Pokemon is incorrect")}function n(){return e}function a(){let e=document.createElement("div");e.classList.add("loading"),e.textContent="loading...",document.body.appendChild(e)}function i(){let e=document.querySelector(".loading");e.remove()}function o(e){return a(),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){i(),e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types.map(e=>e.type.name).join(", "),e.weight=t.weight,e.abilities=t.abilities.map(e=>e.ability.name).join(", ")}).catch(function(e){i(),console.error(e)})}let l=document.querySelector("#search-bar");return l.addEventListener("input",function(){let e=document.querySelectorAll(".list-group-item"),t=l.value.toUpperCase(),n=!0;e.forEach(function(e){e.innerText.toUpperCase().indexOf(t)>-1?(e.style.display="",n=!1):(e.style.display="none",$(".error").hide()),n?$(".error").show():$(".error").hide()})}),$(document).bind("keypress",function(e){if(13==e.keyCode){e.preventDefault();$(".navbar-collapse").collapse("hide"),$("#search-bar").blur()}}),$(document).click(function(e){if($(e.target).parents(".navbar-collapse").length<1){let t=$(e.target),n=$(".navbar-collapse");!0!==n.hasClass("show")||t.hasClass("navbar-toggle")||n.collapse("hide")}}),{add:t,getAll:n,addListItem:function e(t){let n=document.querySelector(".pokemon-list"),a=document.createElement("li");a.classList.add("list-group-item");let i=document.createElement("button");i.classList.add("btn","button"),i.innerText=t.name,i.setAttribute("data-toggle","modal"),i.setAttribute("data-target","#pokemonModal"),a.appendChild(i),n.appendChild(a),i.addEventListener("click",function(){(function e(t){o(t).then(function(){let e=$(".modal-body"),n=$(".modal-title");n.empty(),e.empty();let a=$("<h1>"+t.name+"</h1>"),i=$('<img class="modal-img" style="width:30%">');i.attr("src",t.imageUrl);let o=$("<p><b>Height</b> \xa0\xa0\xa0\xa0\xa0\xa0"+t.height+"</p>"),l=$("<p><b>Weight</b> \xa0\xa0\xa0\xa0\xa0"+t.weight+"</p>"),r=$("<p><b>Types</b> \xa0\xa0\xa0\xa0\xa0\xa0\xa0"+t.types+"</p>"),s=$("<p><b>Abilities</b> \xa0\xa0\xa0"+t.abilities+"</p>");n.append(a),e.append(i),e.append(o),e.append(l),e.append(r),e.append(s)})})(t)})},loadList:function e(){return a(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){i(),e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){i(),console.error(e)})},loadDetails:o}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});