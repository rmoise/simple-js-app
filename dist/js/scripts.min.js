/* eslint-disable prettier/prettier */
let pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.log("Pokemon is incorrect")}function a(){return e}function n(){let e=document.createElement("div");e.classList.add("loading"),e.textContent="loading...",document.body.appendChild(e)}function i(){let e=document.querySelector(".loading");e.remove()}function l(e){return n(),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){i(),e.imageUrl=t.sprites.other.dream_world.front_default,e.height=t.height,e.types=t.types.map(e=>e.type.name).join(", "),e.weight=t.weight,e.abilities=t.abilities.map(e=>e.ability.name).join(", "),e.id=t.id}).catch(function(e){i(),console.error(e)})}let o=document.querySelector("#search-bar");return o.addEventListener("input",function(){let e=document.querySelectorAll(".card"),t=o.value.toUpperCase(),a=!0;e.forEach(function(e){e.innerText.toUpperCase().indexOf(t)>-1?(e.style.display="",a=!1):(e.style.display="none",$(".error").hide()),a?$(".error").show():$(".error").hide()})}),$(document).bind("keypress",function(e){if(13==e.keyCode){e.preventDefault();$(".navbar-collapse").collapse("hide"),$("#search-bar").blur()}}),$(document).click(function(e){if($(e.target).parents(".navbar-collapse").length<1){let t=$(e.target),a=$(".navbar-collapse");!0!==a.hasClass("show")||t.hasClass("navbar-toggle")||a.collapse("hide")}}),{add:t,getAll:a,addListItem:function t(a){l(a).then(function(){let e=document.createElement("p"),t=`

              <div class="item__image ${a.types}">

              </div>
              <div class="item__informations">

                  <div class="container__type">
                      <small class="type ${a.types.split(",")[0]}">
                        ${a.types.split(",")[0]}
                      </small>
                      ${a.types?`
              <small>

              </small>
              <small class="type ${a.types}">

              </small>
              `:" "}
                  </div>
              </div>

            `;e.innerHTML+=t;let n=document.createElement("h4");n.classList.add("card-title"),n.innerHTML=a.name;let l=document.createElement("img");l.setAttribute("src",a.imageUrl),l.classList.add("pokemon-img"),i.append(l),i.appendChild(n),i.appendChild(e),i.appendChild(o)});let n=document.querySelector("#pokemon-list"),i=document.createElement("li");i.classList.add("card");let o=document.createElement("button");o.classList.add("btn","button"),o.innerText="View",o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#pokemonModal"),n.appendChild(i),o.addEventListener("click",function(){(function t(a){l(a).then(function(){let n=$(".modal-body"),i=$(".modal-title"),l=$(".modal-footer");i.empty(),n.empty(),l.empty();let o=$("<h1>"+a.name+"</h1>"),s=$('<img class="modal-img" style="width:30%">');s.attr("src",a.imageUrl);let r=$("<p><b>Height</b> \xa0\xa0\xa0\xa0\xa0\xa0"+a.height+"</p>"),d=$("<p><b>Weight</b> \xa0\xa0\xa0\xa0\xa0"+a.weight+"</p>"),p=$("<p><b>Types</b> \xa0\xa0\xa0\xa0\xa0\xa0\xa0"+a.types+"</p>"),c=$("<p><b>Abilities</b> \xa0\xa0\xa0"+a.abilities+"</p>"),m=document.createElement("button");m.classList.add("btn"),m.innerText="Previous",m.addEventListener("click",()=>{var n;return n=a,void t(e[h(n)-1])}),0===h(a)&&m.classList.add("pokemon-nav1--disabled");let u=document.createElement("div");function h(t){return e.findIndex(e=>e.name===t.name)}u.classList.add("btn"),u.innerText="Next",u.addEventListener("click",()=>{var n;return n=a,void t(e[h(n)+1])}),150===h(a)&&u.classList.add("pokemon-nav2--disabled"),i.append(o),n.append(s),n.append(r),n.append(d),n.append(p),n.append(c),l.append(m),l.append(u)})})(a)})},loadList:function e(){return n(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){i(),e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){i(),console.error(e)})},loadDetails:l}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});